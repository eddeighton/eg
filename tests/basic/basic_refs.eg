

action A
{
    dim int x;
    while( true )
    {
        x( x() + 1 );
        SLEEP;
    }
}

action B
{
    dim A a;
    
    TEST_MSG( a.x() == 1, "A.x is: " << a.x() );
    SLEEP;
    TEST_MSG( a.x() == 2, "A.x is: " << a.x() );
    SLEEP;
    TEST_MSG( a.x() == 3, "A.x is: " << a.x() );
    SLEEP;
}

A a = A();

B b = B();
b.a( a );

SLEEP;
SLEEP;
SLEEP;

