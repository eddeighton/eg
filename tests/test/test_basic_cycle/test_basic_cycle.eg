
dim int state;

state( state() + 1 );
switch( state() )
{
	case 1:
	{
		TEST_MSG( clock::cycle() == 1, "Cycle should be 1: " << clock::cycle() );
		return eg::wait();
	}

	case 2:
	{
		TEST_MSG( clock::cycle() == 1, "Cycle should be 1: " << clock::cycle() );
		return eg::wait();
	}

	case 3:
	{
		TEST_MSG( clock::cycle() == 1, "Cycle should be 1: " << clock::cycle() );
		return eg::sleep();
	}

	case 4:
	{
		TEST_MSG( clock::cycle() == 2, "Cycle should be 2: " << clock::cycle() );
		return eg::wait();
	}

	case 5:
	{
		TEST_MSG( clock::cycle() == 2, "Cycle should be 2: " << clock::cycle() );
		return eg::sleep();
	}

	case 6:
	{
		TEST_MSG( clock::cycle() == 3, "Cycle should be 3: " << clock::cycle() );
		return eg::wait();
	}

	case 7:
	{
		TEST_MSG( clock::cycle() == 3, "Cycle should be 3: " << clock::cycle() );
	}

}
