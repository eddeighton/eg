




cinder::app::getWindow()->setTitle( "Three" );
cinder::app::getWindow()->setSize( 800, 800 );
cinder::app::setWindowPos( 300, 100 );


action Camera
{
    dim cinder::CameraPersp perspective;
    dim cinder::vec3 eye;
    
    eye( cinder::vec3( 8, 8, 2 ) );
    
    action Orbit
    {
        dim float rate;
        dim float radius;
        dim cinder::vec3 offset;
        
        while( true )
        {
            float fAngle = clock::ct() * rate() * M_PI * 2.0f;
            cinder::vec2 v( sin( fAngle ), cos( fAngle ) );
            eye( offset() + cinder::vec3( v.x, v.y, 2 ) * radius() );
            eg::sleep();
        }
    }
    
    while( true )
    {
        perspective.Get().lookAt( eye(), cinder::vec3( 0 ) );
        eg::sleep();
    }
}


Camera cam = Camera.Start();



resource::set< eg::TextResourceHandler >( "script.py" );

action Python
{
    eg::TextResource::Ptr pText = resource::get< eg::TextResource >( "script.py" );
    try
    {
        std::cout << "Executing: script.py" << std::endl;
        pybind11::exec( pText->get(), pybind11::globals(), eg::createPythonContext( *this ) );
    }
    catch( std::exception& e )
    {
        std::cout << e.what() << std::endl;
    }
}

//main render loop
while( !Done() )
{
    cinder::gl::clear();
    cinder::gl::enableDepthRead();
    cinder::gl::enableDepthWrite();
    cinder::gl::setMatrices( perspective() );

    eg::sleep();
}